# UAS Snow Height Correction - Configuration File

# -------- Thresholds --------
thresholds:
  # Maximum RMSE (meters) for Tier 1 to be acceptable
  # If Tier 1 RMSE is below this, no correction is needed
  tier1_rmse_max: 0.15

  # Minimum improvement (as decimal) required for Tier 2 to be accepted
  # Example: 0.20 means Tier 2 must improve RMSE by at least 20%
  tier2_improvement_min: 0.20

  # Correction mode: controls which correction tier to use
  # Options:
  #   'auto' - automatically select best tier based on thresholds (default)
  #   'ppk' or 'tier1' or 'none' - use PPK only, no correction
  #   'vsc' or 'tier2' or 'vertical' - force Vertical Shift Correction
  #   'ptc' or 'tier3' or 'planar' or 'tilt' - force Planar Trend Correction
  correction_mode: "auto"

# -------- Validation --------
validation:
  # Whether to run bootstrap uncertainty analysis
  # Bootstrap is slow but provides confidence intervals
  run_bootstrap: true

  # Number of bootstrap resampling iterations
  bootstrap_iterations: 250

# -------- CRS --------
crs:
  # Horizontal CRS (EPSG code format)
  horizontal: "EPSG:6342" # NAD83(2011) / UTM Zone 13N

  # Vertical datum
  vertical: "NAVD88" # NAVD88

# -------- Paths --------
paths:
  # Area of Interest name (used for folder organization)
  aoi_name: "Widowmaker"

  # Bare ground DSM filename (must be in data/{aoi_name}/bareGround/)
  bare_ground_file: "251110_Widowmaker_Ground-DSM.tiff"

  # Virtual Ground Control Points shapefile (must be in data/{aoi_name}/vGCP/)
  vgcp_file: "Widowmaker_vGCP.shp"

  # Single snow-on DSM file to process (leave empty for batch mode)
  # Must be in data/{aoi_name}/snowOn/
  # Example: 'Professor_251215-DSM.tif'
  snow_on_file: ""

  # Process entire folder in batch mode (leave empty for single file mode)
  # If set to anything (even 'yes'), will process all .tif files in snowOn folder
  # Leave as empty string ('') to use snow_on_file instead
  snow_on_folder: "."
#-------- USAGE NOTES --------
#
# SINGLE FILE MODE:
#   - Set snow_on_file to your filename
#   - Set snow_on_folder to '' (empty)
#   - Run: python uas_snow_correction.py --config config.yaml
#
# BATCH MODE:
#   - Set snow_on_file to '' (empty)
#   - Set snow_on_folder to '.' (or any non-empty string)
#   - Run: python uas_snow_correction.py --config config.yaml
#
# MANUAL CORRECTION MODE:
#   - Set correction_mode to desired tier (ppk, vsc, ptc, or auto)
#   - This overrides automatic tier selection
#   - Useful when you know which correction works best for your data
#
# FOLDER STRUCTURE:
#   Your project folder should look like:
#   ├── config.yaml (this file)
#   ├── uas_snow_correction.py
#   ├── data/
#   │   └── {aoi_name}/
#   │       ├── bareGround/
#   │       │   └── {bare_ground_file}
#   │       ├── vGCP/
#   │       │   └── {vgcp_file}
#   │       └── snowOn/
#   │           └── (snow DSM files)
#   └── outputs/
#       └── {aoi_name}/
#           ├── corrected/
#           ├── statistics/
#           └── plots/
